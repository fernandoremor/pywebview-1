<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>py webview demostrate</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            box-sizing: border-box;
            font-family: "Microsoft YaHei UI";
            overflow: hidden;
            user-select: none;
            background-color: #d7d7d7;
        }
        h1 {
            font-size: 16px;
            text-align: center;
            margin: 15px;
        }
        div {
            margin: 0 auto;
            text-align: center;
        }
    </style>
    <script src="./burgeon.js.cef.sdk.js"></script>
</head>
<body>
    <h1>
        hello , this is a static page for testing pyWebView with cef.<br/>
        <span id="random"></span> <br/>
        <span id="browser_id"></span> <br/>
    </h1>
    <div>
        <button onclick="loadUrl()">弹出一个新的窗口</button>
        <button onclick="windowInstance.closeWindow()">主调关闭窗口</button>
    </div>
    <script>
        function loadUrl() {
            if (typeof window.open_new_window === 'function') {
                open_new_window("http://localhost:8421/pywebview/burgeon/assets/index.html");
            }
        }
        const updateInfo = () => {
            document.getElementById('random').innerText = new Date().toLocaleDateString() + '    ' + new Date().toLocaleTimeString()
            document.getElementById('browser_id').innerText = window.windowId
        };
        window.onload = function() {
            updateInfo();
            setInterval(updateInfo, 1000)
        }

        const f1 = (e) => {
            console.log('listener 1 ', e);
            if (confirm('确定关闭当前窗口')) {
                window.windowInstance.closeWindow();
            }
        };
        __cef__.addEventListener('windowCloseEvent', f1);
    </script>
</body>
</html>